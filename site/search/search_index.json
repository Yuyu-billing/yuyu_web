{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"","title":"Home"},{"location":"architecture/","text":"Yuyu Architecture Yuyu Components Yuyu have two components for running bellow : 1. Yuyu Server Yuyu server provide ability to manage openstack billing by listening to every openstack event. Yuyu server is a required component to use Yuyu Dashboard. There are 3 main component in Yuyu server: API, Cron, Event Monitor. More detail about Yuyu server at https://github.com/btechpt/yuyu Yuyu API : Main component to communicate with Yuyu Dashboard. Yuyu Cron : Provide invoice calculation and rolling capabilities that needed to run every month. Yuyu Event Monitor : Monitor event from openstack to calculate billing spent. 2. Yuyu Dashboard Yuyu dashboard is a panel at openstack dashboard that is used to manage your openstack bills. More detail about Yuyu server at https://github.com/btechpt/yuyu_dashboard","title":"Architecture"},{"location":"architecture/#yuyu-architecture","text":"","title":"Yuyu Architecture"},{"location":"architecture/#yuyu-components","text":"Yuyu have two components for running bellow :","title":"Yuyu Components"},{"location":"architecture/#1-yuyu-server","text":"Yuyu server provide ability to manage openstack billing by listening to every openstack event. Yuyu server is a required component to use Yuyu Dashboard. There are 3 main component in Yuyu server: API, Cron, Event Monitor. More detail about Yuyu server at https://github.com/btechpt/yuyu Yuyu API : Main component to communicate with Yuyu Dashboard. Yuyu Cron : Provide invoice calculation and rolling capabilities that needed to run every month. Yuyu Event Monitor : Monitor event from openstack to calculate billing spent.","title":"1. Yuyu Server"},{"location":"architecture/#2-yuyu-dashboard","text":"Yuyu dashboard is a panel at openstack dashboard that is used to manage your openstack bills. More detail about Yuyu server at https://github.com/btechpt/yuyu_dashboard","title":"2. Yuyu Dashboard"},{"location":"billing-overview/","text":"Billing overview The billing overview page is displayed in graphical form for easy viewing of total resources, active resources, and prices charged. This page can be seeing in Admin > Billing > Billing Overview .","title":"Billing overview"},{"location":"billing-overview/#billing-overview","text":"The billing overview page is displayed in graphical form for easy viewing of total resources, active resources, and prices charged. This page can be seeing in Admin > Billing > Billing Overview .","title":"Billing overview"},{"location":"billing-settings/","text":"Billing Invoices Settings For company profile you can set on admin settings menu like bellow :","title":"Company Profile"},{"location":"billing-settings/#billing-invoices-settings","text":"For company profile you can set on admin settings menu like bellow :","title":"Billing Invoices Settings"},{"location":"contact/","text":"Contact We like to create things with fun, open-minded people. Feel free to ask! Contact : yuyubilling@gmail.com","title":"Contact"},{"location":"contact/#contact","text":"","title":"Contact"},{"location":"contact/#we-like-to-create-things-with-fun-open-minded-people-feel-free-to-ask","text":"Contact : yuyubilling@gmail.com","title":"We like to create things with fun, open-minded people. Feel free to ask!"},{"location":"cost/","text":"Usages cost The usage cost page will display your usage details.","title":"Usages cost"},{"location":"cost/#usages-cost","text":"The usage cost page will display your usage details.","title":"Usages cost"},{"location":"demo/","text":"Demo Our resources is free , you can use for see how it work Yuyu Billing on openstack , please follow guide bellow : Demo access https://demo.yuyu-billing.dev Lab Credentials username : password :","title":"Demo"},{"location":"demo/#demo","text":"Our resources is free , you can use for see how it work Yuyu Billing on openstack , please follow guide bellow :","title":"Demo"},{"location":"demo/#demo-access","text":"https://demo.yuyu-billing.dev","title":"Demo access"},{"location":"demo/#lab-credentials","text":"username : password :","title":"Lab Credentials"},{"location":"email_configuration/","text":"Email activating Besides from notification center, we can receive billing invoice using email, for configuration Update local_settings.py configuration file cd /var/yuyu/ nano yuyu/local_settings.py Running dataabase migration python manage.py migrate After we configure email, now we received information from email","title":"Email configuration"},{"location":"email_configuration/#email-activating","text":"Besides from notification center, we can receive billing invoice using email, for configuration Update local_settings.py configuration file cd /var/yuyu/ nano yuyu/local_settings.py Running dataabase migration python manage.py migrate After we configure email, now we received information from email","title":"Email activating"},{"location":"features/","text":"Admin Dashboard 1. Price Configuration You can set the price on your openstack feature on this page. 2. Project Overview This page will display a summary of the usage of all projects on your openstack. 3. Projects Invoice This page will show the total usage of openstack in each project every month. 4. Billing settings Here for disable or enable billing setting Project Dashboard 1. Overview Summary of the usage in a project. 2. Invoice Your total openstack usage price 3. Usage Cost Details of your openstack usage","title":"Features"},{"location":"features/#admin-dashboard","text":"","title":"Admin Dashboard"},{"location":"features/#1-price-configuration","text":"You can set the price on your openstack feature on this page.","title":"1. Price Configuration"},{"location":"features/#2-project-overview","text":"This page will display a summary of the usage of all projects on your openstack.","title":"2. Project Overview"},{"location":"features/#3-projects-invoice","text":"This page will show the total usage of openstack in each project every month.","title":"3. Projects Invoice"},{"location":"features/#4-billing-settings","text":"Here for disable or enable billing setting","title":"4. Billing settings"},{"location":"features/#project-dashboard","text":"","title":"Project Dashboard"},{"location":"features/#1-overview","text":"Summary of the usage in a project.","title":"1. Overview"},{"location":"features/#2-invoice","text":"Your total openstack usage price","title":"2. Invoice"},{"location":"features/#3-usage-cost","text":"Details of your openstack usage","title":"3. Usage Cost"},{"location":"installation/","text":"Installation 1. Yuyu API & Event Monitor Clone the latest source code and put it on any directory you want. Here i assume you put it on /var cd /var git clone https://github.com/btechpt/yuyu.git cd yuyu 2. Create virtualenv ( Need activated ) virtualenv env --python=python3.8 source env/bin/activate pip install -r requirements.txt 3. Update local_settings.py configuration file cp yuyu/local_settings.py.sample yuyu/local_settings.py vi yuyu/local_settings.py Bellow for configuration : YUYU_NOTIFICATION_URL = \"rabbit://openstack:password@127.0.0.1:5672//\" YUYU_NOTIFICATION_TOPICS = [\"notifications\"] You can get YUYU_NOTIFICATION_URL from neutron.conf, bellow if using kolla-ansible deployment. cat /etc/kolla/neutron-server/neutron.conf | grep transport_url 4. Run database migration python manage.py migrate 5. Yuyu API installation ./bin/setup_api.sh systemctl enable yuyu_api systemctl start yuyu_api systemctl status yuyu_api 6. Yuyu Event Monitor installation ./bin/setup_event_monitor.sh systemctl enable yuyu_event_monitor systemctl start yuyu_event_monitor systemctl status yuyu_event_monitor 7. Crontab installation crontab -e Add on the end file bellow : 1 0 1 * * /var/yuyu/bin/process_invoice.sh 8. Disable virtualenv Last step for Yuyu API is need disabled virtualenv. deactivate 2. Yuyu Dashboard Clone Repository cd /var git clone https://github.com/btechpt/yuyu_dashboard.git cd yuyu_dashboard 2. Setup Yuyu dashboard ./setup_yuyu.sh ... Enter horizon location and press ENTER. example: /var/www/html/horizon ... 3. Install Yuyu Dashboard Depencencies pip3 install -r requirements.txt 4. Add config settings on horizon local_settings.py vi /var/www/html/horizon/openstack_dashboard/local/local_settings.py YUYU_URL=\"http://yuyu_server_url:8182\" CURRENCIES = ('IDR',) DEFAULT_CURRENCY = \"IDR\" For YUYU_URL you can use YUYU_URL=\"http://127.0.0.1:8182\" 5. Restart Horizon systemctl restart apache2 6. Restart memcached (If dashboard login view not proper) systemctl restart memcached Verify Installation Access Dashboard, make sure Billing tab available in the navigation pane dashboard, next step need enabled billing & create pricing.","title":"Installation"},{"location":"installation/#installation","text":"","title":"Installation"},{"location":"installation/#1-yuyu-api-event-monitor","text":"Clone the latest source code and put it on any directory you want. Here i assume you put it on /var cd /var git clone https://github.com/btechpt/yuyu.git cd yuyu 2. Create virtualenv ( Need activated ) virtualenv env --python=python3.8 source env/bin/activate pip install -r requirements.txt 3. Update local_settings.py configuration file cp yuyu/local_settings.py.sample yuyu/local_settings.py vi yuyu/local_settings.py Bellow for configuration : YUYU_NOTIFICATION_URL = \"rabbit://openstack:password@127.0.0.1:5672//\" YUYU_NOTIFICATION_TOPICS = [\"notifications\"] You can get YUYU_NOTIFICATION_URL from neutron.conf, bellow if using kolla-ansible deployment. cat /etc/kolla/neutron-server/neutron.conf | grep transport_url 4. Run database migration python manage.py migrate 5. Yuyu API installation ./bin/setup_api.sh systemctl enable yuyu_api systemctl start yuyu_api systemctl status yuyu_api 6. Yuyu Event Monitor installation ./bin/setup_event_monitor.sh systemctl enable yuyu_event_monitor systemctl start yuyu_event_monitor systemctl status yuyu_event_monitor 7. Crontab installation crontab -e Add on the end file bellow : 1 0 1 * * /var/yuyu/bin/process_invoice.sh 8. Disable virtualenv Last step for Yuyu API is need disabled virtualenv. deactivate","title":"1. Yuyu API &amp; Event Monitor"},{"location":"installation/#2-yuyu-dashboard","text":"Clone Repository cd /var git clone https://github.com/btechpt/yuyu_dashboard.git cd yuyu_dashboard 2. Setup Yuyu dashboard ./setup_yuyu.sh ... Enter horizon location and press ENTER. example: /var/www/html/horizon ... 3. Install Yuyu Dashboard Depencencies pip3 install -r requirements.txt 4. Add config settings on horizon local_settings.py vi /var/www/html/horizon/openstack_dashboard/local/local_settings.py YUYU_URL=\"http://yuyu_server_url:8182\" CURRENCIES = ('IDR',) DEFAULT_CURRENCY = \"IDR\" For YUYU_URL you can use YUYU_URL=\"http://127.0.0.1:8182\" 5. Restart Horizon systemctl restart apache2 6. Restart memcached (If dashboard login view not proper) systemctl restart memcached","title":"2. Yuyu Dashboard"},{"location":"installation/#verify-installation","text":"Access Dashboard, make sure Billing tab available in the navigation pane dashboard, next step need enabled billing & create pricing.","title":"Verify Installation"},{"location":"introduction/","text":"Introduction What is Yuyu ? Yuyu is a plugin in openstack that makes it easy for you to manage your openstack bills. What does yuyu count? Yuyu can set a price for the following OpenStack feature bellow : 1. Pricing Yuyu can set a price for the following OpenStack feature. 2. Instance Flavor You can set the price for each Flavor that you have. Each instance that uses a flavor will be counted for Billing. You still be charged for instance even if the instance is stopped unless you delete it. 3. Volume You can set the price for each volume type per 1 GB. You will be charged for every allocation. The the space allocated will be rounded up before calculating the price. For example you have a volume of 2.3 GB, that volume will be counted as 3 GB. 4. Floating IP You can set the price for each Floating IP that you allocate. 5. Router You can set the price for each Floating IP you allocate that has an external gateway set. Only router that has an external gateway that will be counted, router without external gateway will not be Counted 6. Snapshot You can set the price for each snapshot you take per 1 GB. Same with volume, the space allocated will be rounded up before calculating the price. 7. Image You can set the price for each image you create per 1 GB. Same with volume and Snapshot, the space allocated will be rounded up before calculating the price.","title":"Introduction"},{"location":"introduction/#introduction","text":"","title":"Introduction"},{"location":"introduction/#what-is-yuyu","text":"Yuyu is a plugin in openstack that makes it easy for you to manage your openstack bills.","title":"What is Yuyu ?"},{"location":"introduction/#what-does-yuyu-count","text":"Yuyu can set a price for the following OpenStack feature bellow :","title":"What does yuyu count?"},{"location":"introduction/#1-pricing","text":"Yuyu can set a price for the following OpenStack feature.","title":"1. Pricing"},{"location":"introduction/#2-instance-flavor","text":"You can set the price for each Flavor that you have. Each instance that uses a flavor will be counted for Billing. You still be charged for instance even if the instance is stopped unless you delete it.","title":"2. Instance Flavor"},{"location":"introduction/#3-volume","text":"You can set the price for each volume type per 1 GB. You will be charged for every allocation. The the space allocated will be rounded up before calculating the price. For example you have a volume of 2.3 GB, that volume will be counted as 3 GB.","title":"3. Volume"},{"location":"introduction/#4-floating-ip","text":"You can set the price for each Floating IP that you allocate.","title":"4. Floating IP"},{"location":"introduction/#5-router","text":"You can set the price for each Floating IP you allocate that has an external gateway set. Only router that has an external gateway that will be counted, router without external gateway will not be Counted","title":"5. Router"},{"location":"introduction/#6-snapshot","text":"You can set the price for each snapshot you take per 1 GB. Same with volume, the space allocated will be rounded up before calculating the price.","title":"6. Snapshot"},{"location":"introduction/#7-image","text":"You can set the price for each image you create per 1 GB. Same with volume and Snapshot, the space allocated will be rounded up before calculating the price.","title":"7. Image"},{"location":"invoice/","text":"Download invoices summary For usages summary document pricing currently in Alpha version you can download by PDF document with step bellow : Firstly go to Invoices menu, you can use standard user or admin. And choose for months. And then download your document","title":"Download invoice"},{"location":"invoice/#download-invoices-summary","text":"For usages summary document pricing currently in Alpha version you can download by PDF document with step bellow : Firstly go to Invoices menu, you can use standard user or admin. And choose for months. And then download your document","title":"Download invoices summary"},{"location":"notification/","text":"Notification Center","title":"Notification center"},{"location":"notification/#notification-center","text":"","title":"Notification Center"},{"location":"pre-installation/","text":"Pre-Installation Virtualenv Make sure you installed virtualenv before installing Yuyu pip3 install virtualenv apt install python3.8 Openstack Service Notification You need to enable notification for this openstack service if ceilometer and gnochi service not activated : Nova (nova.conf) Cinder (cinder.conf) Neutron (neutron.conf) Keystone (keystone.conf) 1. Nova Open nova.conf configuration on your controller environment sudo nano nova.conf Add configuration below oslo_messaging_notifications driver = messagingv2 topics = notifications And add configuration below on notifications notify_on_state_change = vm_and_task_state notification_format = unversioned 2. Cinder Open cinder.conf configuration on your controller environment sudo nano cinder.conf Add configuration below on oslo_messaging_notifications driver = messagingv2 topics = notifications 3. Neutron Open neutron.conf configuration on your controller environment sudo nano neutron.conf Add configuration below on oslo_messaging_notifications driver = messagingv2 topics = notifications 4. Keystone Open keystone.conf configuration on your controller environment sudo nano keystone.conf Add configuration below on oslo_messaging_notifications driver = messagingv2 topics = notifications","title":"Pre-Installation"},{"location":"pre-installation/#pre-installation","text":"","title":"Pre-Installation"},{"location":"pre-installation/#virtualenv","text":"Make sure you installed virtualenv before installing Yuyu pip3 install virtualenv apt install python3.8","title":"Virtualenv"},{"location":"pre-installation/#openstack-service-notification","text":"You need to enable notification for this openstack service if ceilometer and gnochi service not activated : Nova (nova.conf) Cinder (cinder.conf) Neutron (neutron.conf) Keystone (keystone.conf)","title":"Openstack Service Notification"},{"location":"pre-installation/#1-nova","text":"Open nova.conf configuration on your controller environment sudo nano nova.conf Add configuration below oslo_messaging_notifications driver = messagingv2 topics = notifications And add configuration below on notifications notify_on_state_change = vm_and_task_state notification_format = unversioned","title":"1. Nova"},{"location":"pre-installation/#2-cinder","text":"Open cinder.conf configuration on your controller environment sudo nano cinder.conf Add configuration below on oslo_messaging_notifications driver = messagingv2 topics = notifications","title":"2. Cinder"},{"location":"pre-installation/#3-neutron","text":"Open neutron.conf configuration on your controller environment sudo nano neutron.conf Add configuration below on oslo_messaging_notifications driver = messagingv2 topics = notifications","title":"3. Neutron"},{"location":"pre-installation/#4-keystone","text":"Open keystone.conf configuration on your controller environment sudo nano keystone.conf Add configuration below on oslo_messaging_notifications driver = messagingv2 topics = notifications","title":"4. Keystone"},{"location":"prerequisites/","text":"Prerequisites System Requirement Before installing Yuyu, let's assume we already have installed apps bellow : Openstack or Openstack with enabling ceilometer and gnochi service Virtualenv Linux environment with Systemd OpenStack deployment support Until alpha version for openstack deployment support, we have tested on : Openstack using Kolla-Ansible Openstack using Devstack Openstack using Manual deployment OpenStack version support Currently we have tested several openstack version to support yuyu : Ussuri => Working Xena => Working Yoga => Working OpenStack Installation For openstack you can follow our documentation, deploy openstack using koll-ansible bellow : Openstack Install Guide","title":"Pre-Requisites"},{"location":"prerequisites/#prerequisites","text":"","title":"Prerequisites"},{"location":"prerequisites/#system-requirement","text":"Before installing Yuyu, let's assume we already have installed apps bellow : Openstack or Openstack with enabling ceilometer and gnochi service Virtualenv Linux environment with Systemd","title":"System Requirement"},{"location":"prerequisites/#openstack-deployment-support","text":"Until alpha version for openstack deployment support, we have tested on : Openstack using Kolla-Ansible Openstack using Devstack Openstack using Manual deployment","title":"OpenStack deployment support"},{"location":"prerequisites/#openstack-version-support","text":"Currently we have tested several openstack version to support yuyu : Ussuri => Working Xena => Working Yoga => Working","title":"OpenStack version support"},{"location":"prerequisites/#openstack-installation","text":"For openstack you can follow our documentation, deploy openstack using koll-ansible bellow : Openstack Install Guide","title":"OpenStack Installation"},{"location":"preusages/","text":"Pre-Usages Before yuyu calculates your openstack usage, there are a few things to do. Complete price configuration items. If the price configuration is not complete then the system will show a warning and billing cannot be activated. For it we can follow this guide . Enable billing . If billing is disabled, yuyu never calculate openstack usage. Billing can be enabled if the price configuration is completed. Can set with Tab Admin -> Billing -> Billing Setting & Click Enable","title":"Pre-Usages"},{"location":"preusages/#pre-usages","text":"Before yuyu calculates your openstack usage, there are a few things to do. Complete price configuration items. If the price configuration is not complete then the system will show a warning and billing cannot be activated. For it we can follow this guide . Enable billing . If billing is disabled, yuyu never calculate openstack usage. Billing can be enabled if the price configuration is completed. Can set with Tab Admin -> Billing -> Billing Setting & Click Enable","title":"Pre-Usages"},{"location":"price/","text":"How to create pricing Pricing feature for openstack you can manage bellow detail : Flavor Volume Snapshot Floating IP Router Images Create price Firstly you need access to admin user, then to billing menu and click to Price Configuration and you can choose your feature for example Flavor pricing. Then create your custom pricing for hourly & monthly: And you can see, success to create flavor pricing","title":"Create price"},{"location":"price/#how-to-create-pricing","text":"Pricing feature for openstack you can manage bellow detail : Flavor Volume Snapshot Floating IP Router Images","title":"How to create pricing"},{"location":"price/#create-price","text":"Firstly you need access to admin user, then to billing menu and click to Price Configuration and you can choose your feature for example Flavor pricing. Then create your custom pricing for hourly & monthly: And you can see, success to create flavor pricing","title":"Create price"}]}